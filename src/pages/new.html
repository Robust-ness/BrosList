<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/new.css">
    <link rel="stylesheet" href="/css/mediaquery.css">
    <title>Document</title>
</head>

<body id="orientation-container">
    <div id="warning-message">
        this website is only viewable in landscape mode
    </div>
<div id="full-page">
    <form id="createAccount">
        <input id="firstName" type="text" placeholder="First Name">
        <input id="lastName" type="text" placeholder="Last Name">
        <input id="username" type="text" placeholder="Username">
        <input id="password" type="text" placeholder="Password">
        <input id="email" type="text" placeholder="Email Address">
        <input id="file" type="file">
        <input type="submit" class="button">
        <img src="/img/profilePic.png" alt="Nope">
        <!-- <input id="pictureSelect" type="radio" name="profileSelect">
        <label for="pictureSelect">Use Camera to Generate Profile Picture</label>
        <input id="fileSelect" type="radio" name="profileSelect">
        <label for="fileSelect">Use file as profile picture</label> -->
    </form>
    <script>
        document.getElementById('createAccount').addEventListener('submit', (e) => {
            e.preventDefault()
            let formdata = new FormData();
            formdata.append('firstName', document.getElementById('firstName').value)
            formdata.append('lastName', document.getElementById('lastName').value)
            formdata.append('username', document.getElementById('username').value)
            formdata.append('password', document.getElementById('password').value)
            formdata.append('email', document.getElementById('email').value)
            console.log(formdata.get('firstName'))
            fetch('/users', {
                method: 'POST',
                body: formdata
            })
            console.log(document.getElementById('firstName').value)
        })
    </script>
    <!-- <video id="video" width="640" height="640" autoplay></video>
    <button id="snap">Snap Photo</button>
    <canvas id="canvas" width="640" height="640"></canvas>
    <button id="convert">Convert</button> -->


    <!-- <script>
      // Elements for taking the snapshot
        let canvas = document.getElementById('canvas');
        var context = canvas.getContext('2d');
        var video = document.getElementById('video');

        // Trigger photo take
        document.getElementById("snap").addEventListener("click", function() {
            context.drawImage(video, 0, 0, 640, 640);
        });  
        
        if(navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            navigator.mediaDevices.getUserMedia({ video: {facingMode: "user"} }).then(async function(stream) {
                console.log(await navigator.mediaDevices.enumerateDevices())
                video.srcObject = stream;
                video.play();
            });
        }
        document.getElementById('convert').addEventListener('click', async function() {
            var image = new Image();
            image.src = canvas.toDataURL("image/png");
            var myHeaders = new Headers();

            var formdata = new FormData();
            formdata.append("profilePic", image.src);
            formdata.append("usedCamera", "true");

            var requestOptions = {
            method: 'POST',
            headers: myHeaders,
            body: formdata,
            redirect: 'follow'
            };

            let result = await fetch("/users/me/profilePic", requestOptions).then(async result => await result.text())

            document.querySelector('body').insertAdjacentHTML('beforeend', `<img src=${result} alt="">`)
        })
        
    </script> -->
</div>
</body>
</html>